# 쏙쏙 들어오는 함수형 코딩에 오신 것을 환영합니다

- 함수형 사고가 무엇인지 설명한다.
- 다른 함수형 프로그래밍 책과 어떻게 다른지 알 수 있다.
- 함수형 프로그래머가 코드를 바라보는 특별한 방법을 알게 된다.
- 이 책을 계속 볼지 말지 감을 잡을 수 있다.

## 함수형 프로그래밍은 무엇인가요?

위키피디아에서는 다음과 같이 요약할 수 있다.

> 1. **수학 함수**를 사용하고 **부수 효과**(side effect)를 피하는 것이 특징인 프로그래밍 패러다임
> 2. **부수 효과** 없이 **순수 함수**(pure function)만 사용하는 프로그래밍 스타일

**부수 효과**는 함수가 리턴값 이외에 하는 모든 일을 말한다.
함수를 부를 때마다 발생하기 때문에 문제가 될 수 있다.
대부분의 함수형 프로그래머는 불필요한 부수 효과를 가능한 사용하지 않으려고 한다.

**순수 함수**는 인자에만 의존하고 부수 효과가 없는 함수이다.
인자에만 의존한다는 말은 같은 인자를 넣으면 항상 같은 결과를 돌려준다는 말이다.
순수 함수는 다루기 쉽고 이해하기 쉽기 떄문에 함수형 프로그래머들이 중요하게 생각한다.

정의에 따르면 함수형 프로그래머는 항상 부수 효과를 피하고 **순수 함수**만 사용해야 할 것 같지만, 실제 함수형 프로그래머는 부수 효과와 순수하지 않는 함수를 사용한다.

## 실용적인 측면에서 함수형 프로그래밍 정의의 문제점

앞서 살펴본 함수형 프로그래밍은 실제 프로그래밍에서는 크게 도움이 되지 않는다.
앞선 정의를 다시 살펴보면 다음과 같다.

1. 수학 함수를 사용하고 부수 효과를 피하는 것이 특징인 프로그래밍 패러다임
2. 부수 효과 없이 순수 함수만 사용하는 프로그래밍 스타일

이는 실용적인 측면에서 세 가지 문제가 있다.

**문제 1: 부수 효과는 필요하다.**

부수 효과는 소프트웨러르 실행하는 이유이다.
필요할 때는 써야 한다.

**문제 2: 함수형 프로그래밍은 부수 효과를 잘 다룰 수 있습니다.**

부수 효과가 문제가 될 수 있지만 실제로 필요한 것이다.
그래서 부수 효과를 잘 다루어야 한다.

**문제 3: 함수형 프로그래밍은 실용적입니다.**

함수형 프로그래밍이 수학적으로 여겨 실제로는 사용하지 않는 것처럼 느낄 수 있다.
하지만 함수형 프로그래밍으로 잘 만들어진 좋은 소프트웨어가 많이 있다.

## 함수형 프로그래밍 정의가 혼란스러운 관리자

## 함수형 프로그래밍을 학문적 지식이 아닌 기술과 개념으로 보기

함수형 프로그래밍은 많은 사람이 서로 다른 의미로 생각한다.

함수형 프로그래밍은 모든 프로그래밍 언어에서 쓸 수 있다.

## 액션과 계산, 데이터 구분하기

액션은 언제, 언마큼 호출하는지가 중요하기 때문에 부를 때 신중해야 한다.

호출하는 횟수나 호출하는 시점을 기준으로 코드를 나눌 수 있다.

액션은 호출하는 시점과 횟수에 의존한다.
그래서 호출할 때 조심해야 한다.

계산이나 데이터는 둘 다 부르는 시점이나 횟수가 중요하지 않다.
둘의 차이는 실행 여부에 있다.
계산은 실행 가능하나 데이터는 그렇지 않다.
데이터는 정적이고 보이는 그대로이지만 계산은 실행하기 전까지 어떻게 동작할지 알 수 없다.

- 액션: 부르는 시점에 의존
- 계산: 입력값을 계산하여 출력
- 데이터: 이벤트에 대한 사실을 기록

각 분류는 다음과 같은 특징을 지닌다.
각 분류에는 그에 해당하는 함수형 프로그래밍 도구가 있다.

### 액션

실행 시점이나 횟수 또는 둘 다에 의존한다.

- 시간이 지남에 따라 안전하게 상태를 바꿀 수 있는 방법
- 순서를 보장하는 방법
- 액션이 정확히 한 번만 실행되게 보장하는 방법

### 계산

입력값으로 출력값을 만드는 것이다.
같은 입력값을 가지고 계산하면 항상 같은 결괏값이 나온다.
언제, 어디서 계산해도 결과는 같고 외부에 영향을 주지 않는다.
계산은 테스트하기 쉽고 언제든지 몇 번을 불러도 안전하다.

- 정확성을 위한 정적 분석
- 소프트웨어에서 쓸 수 있는 수학적 지식
- 테스트 전략

### 데이터

이벤트에 대해 기록한 사실이다.
데이터는 실행하는 코드만큼 복잡하지 않기 때문에 다른 것과 구분된다.
알아보기 쉬운 속성으로 되어 있고 실행하지 않아도 데이터 자체로 의미가 있다.
또 같은 데이터를 여러 형태로 해석할 수 있다.

- 효율적으로 접근하기 위해 데이터를 구성하는 방법
- 데이터를 보관하기 위한 기술
- 데이터를 이용해 중요한 것을 발견하는 원칙

## 액션, 계산, 데이터를 구분하면 어떤 장점이 있나요?

> 함수형 프로그래밍은 요즘 유행하는 분산 시스템에 잘 어울립니다.

### 분산 시스템 규칙 3가지

1. 메시지 순서가 바뀔 수 있다.
2. 메시지는 한 번 이상 도착할 수도 있고 도착하지 않을 수도 있다.
3. 응답을 받지 못하면 무슨 일이 생겼는지 알 수 없다.

함수형 프로그래밍은 단순한 트랜드가 아니다.
오랫동안 쌓아온 수학 지식을 기반으로 한 오래된 프로그래밍 패러다임이다.
이는 복잡한 소프트웨어에 효과적이다.

시간에 따라 바뀌는 값을 모델링할 때 동작 방법을 이해하는 것은 중요하지만 쉽지 않다.
실행 시점이나 횟수에 의존하는 코드를 없애면 코드를 더 쉽게 이해할 수 있고 심각한 버그를 막을 수 있다.

데이터와 계산은 실행 시점이나 횟수에 의존하지 않는다.
그래서 코드를 데이터와 계산으로 바꿀수록 분산 시스템에서 생기는 여러 가지 문제를 해결할 수 있다.

액션은 실행 시점과 횟수에 의존해서 문제가 발생하지만, 코드 전체에 영향을 주지 않도록 격리시키면 된다.
또 분산 시스템이 불확실성을 가지고 있어도 액션을 안전하게 다룰 수 있는 기술이 있기 떄문에 안심할 수 있다.
그리고 코드의 많은 부분을 액션에서 계산으로 옮기면 결과적으로 액션도 다루기 쉬워진다.

## 함수형 사고가 무엇인가요?

함수형 사고는 함수형 프로그래머가 소프트웨어 문제를 해결하기 위해 사용하는 기술과 생각을 말한다.
여러 기술과 생각이 있지만 그 중 가장 중요한 두 가지 개념은 다음과 같다.
첫 번째는 **액션과 계산, 데이터를 구분해서 생각하는 것**, 두 번째는 **일급 추상**(first-class abstraction)이라는 개념이다.
이 두 가지 개념은 함수형 프로그래밍으로 실용적이고 튼튼한 프로그램을 만드는 기초가 된다.
